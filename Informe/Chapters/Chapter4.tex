\lhead{\emph{Resultados Experimentales}}
\graphicspath{{Imagenes/}} 
\chapter{Resultados Experimentales}

En este capitulo se muestra un ejemplo del análisis mediante el uso de tres aplicaciones diferenciando las dos formas que tiene el usuario de brindar datos a la herramienta.\par

\section{Descripción de aplicaciones a analizar}

\begin{description}
\item[SendSMS.apk:] Esta aplicación filtra el \textit{device ID} del usuario a través de un mensaje de texto. Lee el \textit{Device ID} y a continuación lo añade a un intent utilizando el método \textit{putExtra()}, acto seguido envía el intent a través del método \textit{startActivityForResult()} permitiendo a otra aplicación recibirlo y responder. Una vez recibida la respuesta, la aplicación filtra los datos a un mensaje.
\item[Echoer.apk:] Esta aplicación recibe un intent usando el método \textit{getIntent()}, escribe los datos recibidos en el \textit{Log} y por ultimo, envía los datos de vuelta usando \textit{setResult()}.
\item[WriteFile.apk:] Esta aplicación es similar a \textit{SendSMS}, excepto que lee la ubicación del dispositivo y la fuga a un archivo.
\end{description}
\par

\section{Datos}

\subsection{Jerarquía de niveles de seguridad}

En este ejemplo se usaron los niveles de seguridad que muestra la Figura 18. En ella se puede observar a modo de comentario la representación gráfica del orden generado.\par

\begin{center}
\includegraphics[scale=0.5]{Figura18}\par
Figura 18: Ejemplo de definición de orden parcial entre niveles de seguridad.
\end{center}

\subsection{Asignación de niveles}

Para mostrar el funcionamiento de la herramienta solo se le asigna niveles a dos categorías como muestra la Figura 19, ya que, como se ah mencionado con anterioridad, no es necesario darle niveles a todas las categorías participantes en los flujos de información, los restantes niveles de seguridad serán inferidos por el análisis. \par

\begin{center}
\includegraphics[scale=0.75]{Figura19}\par
Figura 19: Ejemplo de asignación de niveles a categorías de sources y sinks.
\end{center}

\subsection{Excepciones}

La excepción de la Figura 20 hace que se ignore el flujo del \textit{device ID} del usuario al \textit{Log}.\par

\begin{center}
\includegraphics[scale=0.75]{Figura20}\par
Figura 20: Ejemplo de definición de excepción.
\end{center}

\subsection{Didfail modificado}

La figura 21 muestra los flujos de información, los métodos que participan y los niveles de seguridad tiene cada uno asignado.\par

\begin{center}
\includegraphics[scale=0.38]{Figura21}\par
Figura 21: COMPLETAR
\end{center}

\section{Resultados obtenidos}

Los resultados obtenidos (Figura 22) muestran que no se producen flujos de información que viole los niveles de seguridad. Además muestra el menor nivel posible, con respecto a los niveles de seguridad, a cada categoría que no tenían nivel asignado.\par
La salida también incluye los Intent lanzados por las aplicaciones. En el conjunto actual de aplicaciones, estos ya fueron utilizados para el análisis y no agrega información en la salida, pero teniendo en cuenta una posible adición de otra aplicación al conjunto, el usuario tiene la posibilidad de ver el nivel de la información que la nueva aplicación puede obtener (en caso de que su archivo manifest así lo permita).\par

\begin{center}
\includegraphics[scale=0.9]{Figura22}\par
Figura 22: Resultados del análisis.
\end{center}

El nivel asignado a la categoría \textit{Log} merece una aclaración. Como se mencionó en la descripción de las aplicaciones a analizar, al \textit{Log} le llega información desde dos lugares, el \textit{device Id} del usuario con un nivel de seguridad \textit{semi-private1} y la ubicación del dispositivo con nivel \textit{semi-public1}. Para evitar la violación de seguridad, el \textit{Log} debe tener un nivel igual o mas privado que sus sources, el cual seria \textit{semi-private1} o \textit{private}. Sin embargo, lo obtenido por la herramienta es \textit{semi-public1}. Esto ocurre por la excepción dada (Figura 20), que ignora el flujo del \textit{device Id} al \textit{log}.